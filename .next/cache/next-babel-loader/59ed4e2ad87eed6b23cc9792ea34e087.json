{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/classCallCheck\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/inherits\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/esm/toConsumableArray\"));\n\nvar _set = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/set\"));\n\nvar _defineProperty = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/define-property\"));\n\n(0, _defineProperty[\"default\"])(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar isServer = typeof window === 'undefined';\n\nexports[\"default\"] = function () {\n  var mountedInstances = new _set[\"default\"]();\n  var state;\n\n  function emitChange(component) {\n    state = component.props.reduceComponentsToState((0, _toConsumableArray2[\"default\"])(mountedInstances), component.props);\n\n    if (component.props.handleStateChange) {\n      component.props.handleStateChange(state);\n    }\n  }\n\n  return (\n    /*#__PURE__*/\n    function (_react_1$Component) {\n      (0, _inherits2[\"default\"])(_class, _react_1$Component);\n      (0, _createClass2[\"default\"])(_class, null, [{\n        key: \"rewind\",\n        // Used when server rendering\n        value: function rewind() {\n          var recordedState = state;\n          state = undefined;\n          mountedInstances.clear();\n          return recordedState;\n        }\n      }]);\n\n      function _class(props) {\n        var _this;\n\n        (0, _classCallCheck2[\"default\"])(this, _class);\n        _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(_class).call(this, props));\n\n        if (isServer) {\n          mountedInstances.add((0, _assertThisInitialized2[\"default\"])(_this));\n          emitChange((0, _assertThisInitialized2[\"default\"])(_this));\n        }\n\n        return _this;\n      }\n\n      (0, _createClass2[\"default\"])(_class, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          mountedInstances.add(this);\n          emitChange(this);\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate() {\n          emitChange(this);\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          mountedInstances[\"delete\"](this);\n          emitChange(this);\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return null;\n        }\n      }]);\n      return _class;\n    }(react_1.Component)\n  );\n};","map":null,"metadata":{},"sourceType":"script"}