{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/amagi/src/github.com/fand/next-docs-template/components/Layout.js\";\nimport React from \"react\";\nimport throttle from \"lodash.throttle\";\nimport styled from \"styled-components\";\nimport constants from \"./constants\";\nimport Sidebar from \"./sidebar\";\nimport Header from \"./header\";\nimport Meta from \"./meta\"; // import Shader from \"./shader\";\n\nvar Wrapper = styled.div.withConfig({\n  displayName: \"Layout__Wrapper\",\n  componentId: \"bk4rf0-0\"\n})([\"position:fixed;top:0;left:0;height:100%;width:100%;overflow:visible;display:flex;transition:left 0.3s;@media (max-width:\", \"px){width:auto;left:-100vw;&.menu{left:0;}}\"], constants.mobile);\nvar SidebarWrapper = styled.div.withConfig({\n  displayName: \"Layout__SidebarWrapper\",\n  componentId: \"bk4rf0-1\"\n})([\"width:270px;-webkit-overflow-scrolling:touch;@media (max-width:\", \"px){width:82vw;}\"], constants.mobile);\nvar BodyColumn = styled.div.withConfig({\n  displayName: \"Layout__BodyColumn\",\n  componentId: \"bk4rf0-2\"\n})([\"flex:1;position:relative;@media (max-width:\", \"px){width:100vw;}\"], constants.mobile);\nvar MainWrapper = styled.main.withConfig({\n  displayName: \"Layout__MainWrapper\",\n  componentId: \"bk4rf0-3\"\n})([\"position:absolute;top:0;left:0;height:100%;width:100%;overflow:auto;-webkit-overflow-scrolling:touch;\"]);\nvar HeaderWrapper = styled.div.withConfig({\n  displayName: \"Layout__HeaderWrapper\",\n  componentId: \"bk4rf0-4\"\n})([\"position:absolute;top:0;width:100%;z-index:2;\"]);\n\nvar Layout =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Layout, _React$Component);\n\n  function Layout() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Layout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Layout)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"watchScroll\", throttle(function () {\n      if (_this.body) {\n        _this.props.dispatch(_this.body.scrollTop > 100 ? showHeader() : hideHeader());\n      }\n    }, 100));\n\n    _defineProperty(_assertThisInitialized(_this), \"setBody\", function (el) {\n      _this.body = el;\n    });\n\n    return _this;\n  }\n\n  _createClass(Layout, [{\n    key: \"componentDidMount\",\n    // static getInitialProps = async ({ pathname }) => ({\n    //     path: pathname\n    // });\n    value: function componentDidMount() {\n      if (process.env.NODE_ENV === \"production\") {\n        if (typeof navigator !== \"undefined\" && \"serviceWorker\" in navigator) {\n          navigator.serviceWorker.register(\"/sw.js\").then(console.log) // eslint-disable-line\n          [\"catch\"](console.error); // eslint-disable-line\n        }\n      }\n\n      if (this.body) {\n        this.body.addEventListener(\"scroll\", this.watchScroll);\n      }\n\n      this.watchScroll();\n      this.props.dispatch(hideMenu());\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.body) {\n        this.body.removeEventListener(\"scroll\", this.watchScroll);\n      }\n    }\n  }, {\n    key: \"url\",\n    value: function url() {\n      return \"https://veda.gl\".concat(this.props.path);\n    }\n  }, {\n    key: \"siteName\",\n    value: function siteName() {\n      return constants.og.title;\n    }\n  }, {\n    key: \"title\",\n    value: function title() {\n      var article = this.props.article[this.props.lang] || this.props.article.en;\n      return (article.title ? article.title + \" | \" : \"\") + constants.og.title;\n    }\n  }, {\n    key: \"description\",\n    value: function description() {\n      return this.props.article.description || constants.og.description;\n    }\n  }, {\n    key: \"image\",\n    value: function image() {\n      return this.props.article.image || constants.og.image;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var sc = this.props.isMenuVisible ? \"menu\" : \"\";\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Meta, {\n        url: this.url(),\n        title: this.title(),\n        image: this.image(),\n        description: this.description(),\n        siteName: constants.og.title,\n        lang: this.props.lang,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(Wrapper, {\n        className: sc,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(SidebarWrapper, {\n        className: sc,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        path: this.props.path,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })), React.createElement(BodyColumn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(HeaderWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Header, {\n        path: this.props.path,\n        i18n: !!this.props.article.ja,\n        url: this.url(),\n        title: this.title(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      })), React.createElement(MainWrapper, {\n        ref: this.setBody,\n        className: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, this.props.children))));\n    }\n  }]);\n\n  return Layout;\n}(React.Component);\n\nexport default Layout;","map":{"version":3,"sources":["/Users/amagi/src/github.com/fand/next-docs-template/components/Layout.js"],"names":["React","throttle","styled","constants","Sidebar","Header","Meta","Wrapper","div","mobile","SidebarWrapper","BodyColumn","MainWrapper","main","HeaderWrapper","Layout","body","props","dispatch","scrollTop","showHeader","hideHeader","el","process","env","NODE_ENV","navigator","serviceWorker","register","then","console","log","error","addEventListener","watchScroll","hideMenu","removeEventListener","path","og","title","article","lang","en","description","image","sc","isMenuVisible","url","ja","setBody","children","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport throttle from \"lodash.throttle\";\nimport styled from \"styled-components\";\nimport constants from \"./constants\";\nimport Sidebar from \"./sidebar\";\nimport Header from \"./header\";\nimport Meta from \"./meta\";\n// import Shader from \"./shader\";\n\nconst Wrapper = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: visible;\n  display: flex;\n\n  transition: left 0.3s;\n  @media (max-width: ${constants.mobile}px) {\n    width: auto;\n    left: -100vw;\n    &.menu {\n      left: 0;\n    }\n  }\n`;\n\nconst SidebarWrapper = styled.div`\nwidth: 270px;\n-webkit-overflow-scrolling: touch;\n@media (max-width: ${constants.mobile}px) {\n  width: 82vw;\n}\n`;\n\nconst BodyColumn = styled.div`\nflex: 1;\nposition: relative;\n@media (max-width: ${constants.mobile}px) {\n  width: 100vw;\n}\n`;\n\nconst MainWrapper = styled.main`\nposition: absolute;\ntop: 0;\nleft: 0;\nheight: 100%;\nwidth: 100%;\noverflow: auto;\n-webkit-overflow-scrolling: touch;\n`;\n\nconst HeaderWrapper = styled.div`\nposition: absolute;\ntop: 0;\nwidth: 100%;\nz-index: 2;\n`;\n\nclass Layout extends React.Component {\n  // static getInitialProps = async ({ pathname }) => ({\n  //     path: pathname\n  // });\n\n  componentDidMount() {\n    if (process.env.NODE_ENV === \"production\") {\n      if (\n        typeof navigator !== \"undefined\" &&\n        \"serviceWorker\" in navigator\n      ) {\n        navigator.serviceWorker\n        .register(\"/sw.js\")\n        .then(console.log) // eslint-disable-line\n        .catch(console.error); // eslint-disable-line\n      }\n    }\n\n    if (this.body) {\n      this.body.addEventListener(\"scroll\", this.watchScroll);\n    }\n\n    this.watchScroll();\n    this.props.dispatch(hideMenu());\n  }\n\n  componentWillUnmount() {\n    if (this.body) {\n      this.body.removeEventListener(\"scroll\", this.watchScroll);\n    }\n  }\n\n  watchScroll = throttle(() => {\n    if (this.body) {\n      this.props.dispatch(\n        this.body.scrollTop > 100 ? showHeader() : hideHeader()\n      );\n    }\n  }, 100);\n\n  url() {\n    return `https://veda.gl${this.props.path}`;\n  }\n\n  siteName() {\n    return constants.og.title;\n  }\n\n  title() {\n    const article =\n    this.props.article[this.props.lang] || this.props.article.en;\n    return (\n      (article.title ? article.title + \" | \" : \"\") + constants.og.title\n    );\n  }\n\n  description() {\n    return this.props.article.description || constants.og.description;\n  }\n\n  image() {\n    return this.props.article.image || constants.og.image;\n  }\n\n  setBody = (el) => {\n    this.body = el;\n  };\n\n  render() {\n    const sc = this.props.isMenuVisible ? \"menu\" : \"\";\n\n    return (\n      <div>\n        <Meta\n          url={this.url()}\n          title={this.title()}\n          image={this.image()}\n          description={this.description()}\n          siteName={constants.og.title}\n          lang={this.props.lang}\n        />\n        <Wrapper className={sc}>\n          <SidebarWrapper className={sc}>\n            <Sidebar path={this.props.path} />\n          </SidebarWrapper>\n          <BodyColumn>\n            <HeaderWrapper>\n              <Header\n                path={this.props.path}\n                i18n={!!this.props.article.ja}\n                url={this.url()}\n                title={this.title()}\n              />\n            </HeaderWrapper>\n            <MainWrapper ref={this.setBody} className=\"body\">\n              {this.props.children}\n            </MainWrapper>\n          </BodyColumn>\n        </Wrapper>\n        {/* <Shader shader={this.props.shader} /> */}\n      </div>\n    );\n  }\n}\n\nexport default Layout;\n"]},"metadata":{},"sourceType":"module"}